jQuery(document).ready(function(n){"use strict";n.wc_variation_images={init:function(){n("#woocommerce-product-data").on("woocommerce_variations_loaded",function(){n.wc_variation_images.add_images_box(),n.wc_variation_images.sortable()}),n("#variable_product_options").on("woocommerce_variations_added",function(){n.wc_variation_images.add_images_box(),n.wc_variation_images.sortable()})},add_images_box:function(){n(".woocommerce_variation").each(function(){var i=n(this).find(".options");n(this).find(".wc-variation-images-gallery-wrapper").insertBefore(i)})},sortable:function(){n(".woocommerce_variation").each(function(){n(this).find(".wc-variation-images-image-list").sortable({items:"li.wc-variation-images-image-info",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.75,start:function(i,a){a.item.css("background-color","#f6f6f6")},stop:function(i,a){a.item.removeAttr("style")},update:function(){n.wc_variation_images.update_variation(this)}})})},update_variation:function(i){n(i).closest(".woocommerce_variation").addClass("variation-needs-update"),n(".cancel-variation-changes, .save-variation-changes").removeAttr("disabled"),n("#variable_product_options").trigger("woocommerce_variations_input_changed")},upload_images:function(i){i.preventDefault();var t=n(this).data("wc_variation_images_variation_id");if(n.wc_variation_images.is_cross_upload_limit(t))return alert("Upload limit 5 images in free version"),!1;var e=n(this),o=wp.media.frames.file_frame=wp.media({title:WC_VARIATION_IMAGES.variation_image_title,button:{text:WC_VARIATION_IMAGES.add_variation_image_text},library:{type:["image","video"]},multiple:!0});o.on("select",function(){var i=o.state().get("selection").toJSON();if(5<n("#wc-variation-images-image-list-"+t+" li").length+i.length)return alert("Upload limit 5 images in free version"),!1;var a=i.map(function(i){var a=i.id,e=i.url;return wp.template("wc-variation-images")({image_id:a,image_url:e,variation_id:t})}).join("");e.parent().prev().find(".wc-variation-images-image-list").append(a),n.wc_variation_images.variation_change_trigger(e)}),o.open()},variation_change_trigger:function(i){i.closest(".woocommerce_variation").addClass("variation-needs-update"),n("button.cancel-variation-changes, button.save-variation-changes").removeAttr("disabled"),n("#variable_product_options").trigger("woocommerce_variations_input_changed")},remove_images:function(i){var a=n(this);i.preventDefault(),n.wc_variation_images.variation_change_trigger(a),n(this).parent().remove()},is_cross_upload_limit:function(i){return 5<=n("#wc-variation-images-image-list-"+i+" li").length}},n.wc_variation_images.init(),n(document).on("click",".wc-variation-images-add-image",n.wc_variation_images.upload_images),n(document).on("click",".wc-variation-images-remove-image",n.wc_variation_images.remove_images)});