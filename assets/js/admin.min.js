jQuery(document).ready(function(o){"use strict";o.wc_variation_images={init:function(){o("#woocommerce-product-data").on("woocommerce_variations_loaded",function(){o.wc_variation_images.add_images_box(),o.wc_variation_images.sortable()}),o("#variable_product_options").on("woocommerce_variations_added",function(){o.wc_variation_images.add_images_box(),o.wc_variation_images.sortable()})},add_images_box:function(){o(".woocommerce_variation").each(function(){var i=o(this).find(".options");o(this).find(".wc-variation-images-gallery-wrapper").insertBefore(i)})},sortable:function(){o(".woocommerce_variation").each(function(){o(this).find(".wc-variation-images-image-list").sortable({items:"li.wc-variation-images-image-info",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.75,start:function(i,a){a.item.css("background-color","#f6f6f6")},stop:function(i,a){a.item.removeAttr("style")},update:function(){o.wc_variation_images.update_variation(this)}})})},update_variation:function(i){o(i).closest(".woocommerce_variation").addClass("variation-needs-update"),o(".cancel-variation-changes, .save-variation-changes").removeAttr("disabled"),o("#variable_product_options").trigger("woocommerce_variations_input_changed")},upload_images:function(i){i.preventDefault();var e=o(this).data("wc_variation_images_variation_id");if(o.wc_variation_images.is_cross_upload_limit(e))return alert("Upload limit 5 images in free version"),!1;var a=o(this),t=wp.media.frames.file_frame=wp.media({title:WC_VARIATION_IMAGES.variation_image_title,button:{text:WC_VARIATION_IMAGES.add_variation_image_text},library:{type:["image","video"]},multiple:!0});t.on("select",function(){var i=t.state().get("selection").toJSON();if(5<o("#wc-variation-images-image-list-"+e+" li").length+i.length)return alert("Upload limit 5 images in free version"),!1;i=i.map(function(i){var a=i.id,i=i.url;return wp.template("wc-variation-images")({image_id:a,image_url:i,variation_id:e})}).join("");a.parent().prev().find(".wc-variation-images-image-list").append(i),o.wc_variation_images.variation_change_trigger(a)}),t.open()},variation_change_trigger:function(i){i.closest(".woocommerce_variation").addClass("variation-needs-update"),o("button.cancel-variation-changes, button.save-variation-changes").removeAttr("disabled"),o("#variable_product_options").trigger("woocommerce_variations_input_changed")},remove_images:function(i){var a=o(this);i.preventDefault(),o.wc_variation_images.variation_change_trigger(a),o(this).parent().remove()},is_cross_upload_limit:function(i){return 5<=o("#wc-variation-images-image-list-"+i+" li").length}},o.wc_variation_images.init(),o(document).on("click",".wc-variation-images-add-image",o.wc_variation_images.upload_images),o(document).on("click",".wc-variation-images-remove-image",o.wc_variation_images.remove_images)});