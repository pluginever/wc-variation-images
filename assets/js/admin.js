jQuery(document).ready((function(i){"use strict";i.wc_variation_images={init:function(){i("#woocommerce-product-data").on("woocommerce_variations_loaded",(function(){i.wc_variation_images.add_images_box()})),i("#variable_product_options").on("woocommerce_variations_added",(function(){i.wc_variation_images.add_images_box()}))},add_images_box:function(){i(".woocommerce_variation").each((function(){var a=i(this).find(".options");i(this).find(".wc-variation-images-gallery-wrapper").insertBefore(a)}))},upload_images:function(a){a.preventDefault();var e=i(this).data("wc_variation_images_variation_id");if(i.wc_variation_images.is_cross_upload_limit(e))return alert("Upload limit 3 images in free version"),!1;var t=i(this),o=wp.media.frames.file_frame=wp.media({title:WC_VARIATION_IMAGES.variation_image_title,button:{text:WC_VARIATION_IMAGES.add_variation_image_text},library:{type:["image","video"]},multiple:!0});o.on("select",(function(){var a=o.state().get("selection").toJSON();if(i("#wc-variation-images-image-list-"+e+" li").length+a.length>3)return alert("Upload limit 3 images in free version"),!1;var n=a.map((function(i){var a=i.id,t=i.url;return wp.template("wc-variation-images")({image_id:a,image_url:t,variation_id:e})})).join("");t.parent().prev().find(".wc-variation-images-image-list").append(n),i.wc_variation_images.variation_change_trigger(t)})),o.open()},variation_change_trigger:function(a){a.closest(".woocommerce_variation").addClass("variation-needs-update"),i("button.cancel-variation-changes, button.save-variation-changes").removeAttr("disabled"),i("#variable_product_options").trigger("woocommerce_variations_input_changed")},remove_images:function(a){var e=i(this);a.preventDefault(),i.wc_variation_images.variation_change_trigger(e),i(this).parent().remove()},is_cross_upload_limit:function(a){return i("#wc-variation-images-image-list-"+a+" li").length>=3}},i.wc_variation_images.init(),i(document).on("click",".wc-variation-images-add-image",i.wc_variation_images.upload_images),i(document).on("click",".wc-variation-images-remove-image",i.wc_variation_images.remove_images)}));